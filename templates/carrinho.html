<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../static/css/CSS.css">
    <title>MMG</title>
</head>
<body>
    <div id="menu">
        <table style="width:50%">
            <tr>
                <th>Produto</th>
                <th>Valor</th>
                <th>Qtd</th>
                <th>Total</th>
                <th>Ações</th>
            </tr>
            <!-- Os produtos no carrinho serão adicionados aqui dinamicamente -->
        </table>
    </div>

    <script>
        var total = 0;
        cart.forEach(function (produto) {
            var produtoTotal = produto.price * produto.qtd;
            total += produtoTotal;
            cartTable.innerHTML += `
                <tr>
                    <td>${produto.title}</td>
                    <td>${produto.price.toFixed(2)}</td>
                    <td>
                        <button class="decrement-button" data-id="${produto.id}">-</button>
                        <span class="qtd">${produto.qtd}</span>
                        <button class="increment-button" data-id="${produto.id}">+</button>
                    </td>
                    <td>${produtoTotal.toFixed(2)}</td>
                    <td>
                        <button class="remove-button" data-id="${produto.id}">E<button> 
                        <button class="buy-button" data-id="${produto.id}">C</button>
                    </td>
                </tr>
            `;
        });
        var incrementButtons = cartTable.querySelectorAll('.increment-button');
    incrementButtons.forEach(function (button) {
        button.addEventListener('click', function () {
            var id = parseInt(button.getAttribute('data-id'));
            var produto = cart.find((produto) => produto.id == id);
            if (produto) {
                produto.qtd += 1;
                updateCart();
            }
        });
    });
    //decremento
    var decrementButtons = cartTable.querySelectorAll('.decrement-button');
    decrementButtons.forEach(function (button) {
        button.addEventListener('click', function () {
            var id = parseInt(button.getAttribute('data-id'));
            var produto = cart.find((produto) => produto.id == id);
            if (produto && produto.qtd > 1) {
                produto.qtd -= 1;
                updateCart();
            }
        });
    });
    </script>
</body>
</html>